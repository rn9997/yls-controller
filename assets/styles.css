/* =========================================================
   LOCAL SWEAT — PRO GAMER STORE THEME (v6 PRO)
   Goals: pixel crisp, a11y-first, buttery motion, zero cruft.
   Stack: CSS Layers • Tokens • Container Queries • :has() • Forced Colors
   ========================================================= */

@layer reset, tokens, base, theme, components, utilities;

/* ---------------------- Reset ---------------------- */
@layer reset {
  *,*::before,*::after{ box-sizing:border-box }
  html,body{ block-size:100% }
  html{ -webkit-text-size-adjust:100%; text-size-adjust:100% }
  body{ margin:0 }
  :where(img,svg,video,canvas){ display:block; max-inline-size:100%; block-size:auto; background:transparent }
  :where(button,input,select,textarea){ font:inherit; color:inherit }
  :where(a){ color:inherit; text-decoration:none }
  :where(ul,ol){ margin:0; padding:0; list-style:none }
  :where(hr){ border:0; border-block-start:1px solid rgba(255,255,255,.08); margin:0 }
}

/* ---------------------- Tokens ---------------------- */
@layer tokens {
  :root{
    color-scheme: dark;

    /* Surfaces */
    --bg:#05060a;        /* page */
    --panel:#0b0f17;     /* cards/panels */
    --soft:#0a0d14;      /* image/soft surface */
    --line:#1b2330;      /* hairline */

    /* Brand / accents */
    --brandA:#66a6ff; --brandB:#a76dff; --brandC:#16e4ff;
    --hot:#ff3a88;  --ok:#a6ff4d; --warn:#ffd166; --err:#ff6b6b;

    /* Text */
    --text:#eef3ff; --muted:#9fb0c9;

    /* Depth */
    --radius:18px;
    --r-sm:10px; --r-md:12px; --r-lg:14px; --r-xl:20px;
    --shadow-lg:0 30px 80px rgba(0,0,0,.55), 0 2px 0 rgba(255,255,255,.03) inset;
    --shadow-md:0 16px 40px rgba(0,0,0,.45);
    --shadow-sm:0 8px 18px rgba(0,0,0,.35);

    /* Glows */
    --glowA:0 0 0 2px rgba(102,166,255,.35), 0 0 30px rgba(22,228,255,.18);
    --glowB:0 0 0 2px rgba(167,109,255,.32), 0 0 26px rgba(255,58,136,.18);

    /* Motion */
    --dur-0:.08s; --dur-1:.12s; --dur-2:.22s; --dur-3:.40s;
    --e-out:cubic-bezier(.2,.7,.2,1); --e-in:cubic-bezier(.4,0,.2,1);

    /* Rhythm */
    --s-1:clamp(6px,0.35vw + 4px,8px);
    --s-2:clamp(10px,0.5vw + 6px,12px);
    --s-3:clamp(14px,0.7vw + 8px,16px);
    --s-4:clamp(18px,1vw + 10px,22px);

    /* Fluid type */
    --fs-0:clamp(12.5px,0.35vw + 10px,14px);
    --fs-1:clamp(14px,0.45vw + 11px,16px);
    --fs-2:clamp(16px,0.55vw + 12px,18px);
    --fs-3:clamp(18px,0.75vw + 12px,22px);
    --fs-4:clamp(22px,1.2vw + 14px,28px);
    --fs-5:clamp(28px,2.5vw + 16px,54px);

    /* Controls */
    --ctl-py:10px; --ctl-px:14px;

    /* Layout */
    --wrap:max(18px, 4vw);
    --container:1200px;

    /* Z-index scale */
    --z-nav:60; --z-overlay:55; --z-modal:70;
  }

  /* Density knobs (opt-in on <body>): data-density="cozy|compact" */
  [data-density="cozy"]{ --ctl-py:12px; --ctl-px:16px }
  [data-density="compact"]{ --ctl-py:8px; --ctl-px:12px }

  /* High-contrast preference */
  @media (prefers-contrast: more){
    :root{
      --line:#2b3a52;
      --glowA:0 0 0 2px rgba(102,166,255,.7);
      --glowB:0 0 0 2px rgba(167,109,255,.7);
    }
  }

  /* Optional light theme */
  [data-theme="light"]{
    color-scheme: light;
    --bg:#f7f9ff; --panel:#fff; --soft:#f2f5ff; --line:#dbe4f3;
    --text:#0d1420; --muted:#4a5a74;
  }

  /* Optional mono theme */
  [data-theme="mono"]{
    --brandA:#d0e1ff; --brandB:#bcd1ff; --brandC:#e8f3ff; --hot:#ffffff;
  }
}

/* ---------------------- Base ---------------------- */
@layer base {
  :root{ accent-color:var(--brandA) }

  @media (prefers-reduced-motion: reduce){
    *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; scroll-behavior:auto !important }
  }

  body{
    font:var(--fs-2)/1.65 Inter, ui-sans-serif, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    color:var(--text);
    background:
      radial-gradient(62rem 42rem at 85% -10%, rgba(102,166,255,.12), transparent 70%),
      radial-gradient(52rem 42rem at -10% 0, rgba(22,228,255,.10), transparent 70%),
      linear-gradient(180deg,#060810,#05060a 60%);
    -webkit-font-smoothing:antialiased;
    text-rendering:optimizeLegibility;
  }

  .container{ inline-size:min(var(--container), 100%); margin-inline:auto; padding-inline:var(--wrap); padding-block:var(--s-4) }

  ::selection{ background:rgba(102,166,255,.35) }
  *{ scrollbar-width:thin; scrollbar-color:#32405a #0a0d14 }
  *::-webkit-scrollbar{ inline-size:10px; block-size:10px }
  *::-webkit-scrollbar-thumb{ background:#32405a; border-radius:999px }
  *::-webkit-scrollbar-track{ background:#0a0d14 }

  /* RTL */
  [dir="rtl"] .row{ flex-direction:row-reverse }
  [dir="rtl"] .ribbon{ inset-inline-start:-8px; inset-block-start:10px }

  /* Print */
  @media print{
    body{ background:#fff; color:#000 }
    .header,.footer,.overlay{ display:none !important }
    .card{ box-shadow:none; border:1px solid #000 }
  }
}

/* ---------------------- Theme ---------------------- */
@layer theme {
  .header{
    position:sticky; inset-block-start:0; z-index:var(--z-nav);
    backdrop-filter:blur(12px);
    background:linear-gradient(180deg, rgba(6,8,12,.85), rgba(6,8,12,.6));
    border-block-end:1px solid var(--line);
    box-shadow:0 10px 30px rgba(0,0,0,.4);
  }
  .nav{ display:flex; align-items:center; gap:14px; padding-block:12px }
  .nav .grow{ flex:1 }

  .logo{
    display:inline-flex; align-items:center; gap:12px;
    font-weight:900; letter-spacing:.35px; text-transform:uppercase;
  }
  .logo .badge{
    display:grid; place-items:center; inline-size:40px; block-size:40px; border-radius:12px;
    color:#05070b; font-weight:900;
    background:conic-gradient(from 0 at 50% 50%, var(--brandA), var(--brandB), var(--brandC), var(--brandA));
    box-shadow:var(--glowA);
  }
}

/* ---------------------- Components ---------------------- */
@layer components {
  /* Buttons & Inputs */
  .btn{
    --bgBtn:linear-gradient(180deg,#0f1522,#0b111c);
    display:inline-flex; align-items:center; gap:10px;
    padding:var(--ctl-py) var(--ctl-px);
    border-radius:12px; border:1px solid var(--line);
    background:var(--bgBtn); color:var(--text);
    cursor:pointer;
    transition:transform var(--dur-1) var(--e-out), box-shadow var(--dur-2) var(--e-out), border-color var(--dur-2), background var(--dur-2), filter var(--dur-2);
    will-change:transform;
  }
  .btn:hover{ transform:translateY(-1px); border-color:#2c3749; box-shadow:var(--glowA) }
  .btn:active{ transform:translateY(0) }
  .btn[disabled]{ opacity:.55; cursor:not-allowed; filter:grayscale(.2) }
  .btn:focus-visible{ outline:none; box-shadow:var(--glowA) }
  .btn.primary{
    --bgBtn:linear-gradient(135deg,var(--brandA), var(--brandB) 55%, var(--brandC));
    border-color:transparent; color:#06070a; font-weight:800;
    text-shadow:0 1px 0 rgba(255,255,255,.25);
  }
  .btn.ghost{ background:transparent }
  .btn.icon{ padding:8px 10px; border-radius:10px }

  .select,.input,textarea{
    padding:11px 12px; border-radius:12px; border:1px solid var(--line);
    background:linear-gradient(180deg,#101626,#0b1120);
    color:var(--text); outline:none;
    transition:box-shadow var(--dur-2), border-color var(--dur-2), background var(--dur-2);
  }
  .select:focus,.input:focus,textarea:focus{ box-shadow:var(--glowB); border-color:#3a4256 }
  .input::placeholder,textarea::placeholder{ color:#7f8ca4 }

  /* Hero */
  .hero{ display:grid; grid-template-columns:1.1fr .9fr; gap:22px; align-items:center }
  @media (max-width:900px){ .hero{ grid-template-columns:1fr } }
  .hero .eyebrow{ font-size:var(--fs-0); color:var(--muted); letter-spacing:.2px }
  .hero .headline{ font-size:var(--fs-5); line-height:1.06; margin:4px 0 10px; font-weight:900; letter-spacing:.2px }
  .hero .gradient{
    background:linear-gradient(90deg,var(--brandA),var(--brandB),var(--hot));
    -webkit-background-clip:text; background-clip:text; color:transparent;
  }
  .badge{
    display:inline-flex; align-items:center; gap:8px;
    padding:7px 11px; border-radius:999px; border:1px solid var(--line);
    background:linear-gradient(180deg,#0f1524,#0b0f1b);
    color:#d6e6ff; font-size:12.5px;
  }
  .badge.hot{ border-color:rgba(255,58,136,.5); color:#ffd9ea }
  .badge.ok{  border-color:rgba(166,255,77,.45); color:#ecffd1 }

  /* Grid & Cards */
  .grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:18px }
  @media (max-width:980px){ .grid{ grid-template-columns:repeat(2,1fr) } }
  @media (max-width:640px){ .grid{ grid-template-columns:1fr } }

  .card{
    background:
      radial-gradient(120% 120% at 100% 0%, rgba(102,166,255,.08), transparent 45%),
      radial-gradient(120% 120% at 0% 100%,  rgba(22,228,255,.07), transparent 45%),
      var(--panel);
    border:1px solid var(--line);
    border-radius:var(--radius);
    overflow:hidden; position:relative;
    box-shadow:var(--shadow-lg);
    transition:transform var(--dur-3) var(--e-out), box-shadow var(--dur-3) var(--e-out), border-color var(--dur-2);
    will-change:transform;
    container-type:inline-size;
  }
  .card:has(.pimg img):hover{ transform:translateY(-6px); border-color:#3a445c; box-shadow:0 32px 90px rgba(0,0,0,.6), var(--glowA) }
  .card.pad{ padding:16px }

  .ribbon{
    position:absolute; inset-block-start:10px; inset-inline-start:-8px; z-index:2;
    background:linear-gradient(135deg,var(--hot),var(--brandB)); color:#fff;
    padding:6px 12px; font-size:12px; font-weight:800; text-transform:uppercase;
    border-start-end-radius:8px; border-end-end-radius:8px;
    box-shadow:var(--shadow-md);
  }

  .pimg{ aspect-ratio:4/3; overflow:hidden; position:relative; background:var(--soft) }
  .pimg::after{
    content:""; position:absolute; inset:0;
    background:radial-gradient(45% 45% at 76% 18%, rgba(255,58,136,.10), transparent 70%);
    mix-blend-mode:screen; pointer-events:none;
  }
  .pimg img{
    inline-size:100%; block-size:100%; object-fit:cover;
    transform:scale(1.02); transition:transform .45s var(--e-out);
  }
  .card:hover .pimg img{ transform:scale(1.07) rotate(.2deg) }

  .ptitle{ font-weight:800; margin:10px 0 4px; font-size:17px; letter-spacing:.2px }
  .pmeta{ font-size:13px; color:var(--muted) }

  .price{
    font-weight:900; letter-spacing:.25px;
    background:linear-gradient(90deg,var(--brandA),var(--brandC));
    -webkit-background-clip:text; background-clip:text; color:transparent;
    filter:drop-shadow(0 0 10px rgba(22,228,255,.20));
  }

  /* Rating (0–5) */
  .rating{ display:inline-flex; gap:2px; --val:0 }
  .rating::before{
    content:"★★★★★"; letter-spacing:2px; font-size:12px;
    background:linear-gradient(90deg,var(--warn) 0 calc(var(--val)*20%), #2a3446 0);
    -webkit-background-clip:text; background-clip:text; color:transparent;
  }
  .rating[data-stars="5"]{ --val:5 } .rating[data-stars="4"]{ --val:4 }
  .rating[data-stars="3"]{ --val:3 } .rating[data-stars="2"]{ --val:2 }
  .rating[data-stars="1"]{ --val:1 } .rating[data-stars="0"]{ --val:0 }

  /* Tags */
  .tag{
    display:inline-flex; align-items:center; gap:6px;
    padding:6px 10px; font-size:12px; border-radius:999px;
    border:1px solid #30384a; color:#d6e3ff;
    background:linear-gradient(180deg,#0f1626,#0a1020);
  }
  .tag + .tag{ margin-inline-start:6px }

  /* Rows / utilities */
  .row{ display:flex; gap:12px; align-items:center }
  .row.spread{ justify-content:space-between }
  .small{ font-size:12.5px; color:var(--muted) }

  /* Tabs / Filters */
  .tabs{
    display:flex; gap:8px; padding:6px;
    background:linear-gradient(180deg,#0e1423,#0a1020);
    border:1px solid var(--line); border-radius:14px; overflow:auto;
  }
  .tab{
    padding:9px 12px; border-radius:10px; border:1px solid transparent; cursor:pointer;
    color:var(--muted); white-space:nowrap;
    transition:background var(--dur-2), color var(--dur-2), border-color var(--dur-2), transform var(--dur-1);
  }
  .tab:hover{ color:#f0f5ff; transform:translateY(-1px) }
  .tab:focus-visible{ outline:none; box-shadow:var(--glowB) }
  .tab.active{
    background:linear-gradient(180deg,#0b0f1b,#08101c);
    color:#f2f6ff; border-color:#3b465f; box-shadow:var(--glowB);
  }

  /* Drawer (Mini cart) */
  .overlay{
    position:fixed; inset:0; background:rgba(0,0,0,.45);
    backdrop-filter:blur(2px); opacity:0; pointer-events:none; transition:opacity var(--dur-2); z-index:var(--z-overlay);
  }
  .overlay.show{ opacity:1; pointer-events:auto }

  .drawer{
    position:fixed; inset-block:0; inset-inline-end:-420px;
    inline-size:min(380px,100%); block-size:100%;
    background:linear-gradient(180deg,#0c1017,#0a0e15);
    border-inline-start:1px solid var(--line); transition:inset-inline-end .28s var(--e-out); z-index:var(--z-nav);
    display:flex; flex-direction:column; box-shadow:var(--shadow-md);
  }
  .drawer.open{ inset-inline-end:0 }

  /* Gallery */
  .gallery{ display:grid; gap:10px }
  .gallery-main{ border-radius:14px; overflow:hidden; background:var(--soft) }
  .gallery-thumbs{ display:flex; gap:10px; overflow:auto; padding-block-start:6px }
  .gallery-thumbs img{
    inline-size:76px; block-size:76px; object-fit:cover; border-radius:10px;
    border:1px solid var(--line); cursor:pointer;
    transition:transform var(--dur-1), box-shadow var(--dur-2), border-color var(--dur-2), opacity var(--dur-2);
    opacity:.9;
  }
  .gallery-thumbs img:hover,
  .gallery-thumbs img[aria-current="true"]{
    transform:translateY(-1px); box-shadow:var(--glowA); border-color:#3a4358; opacity:1;
  }

  /* Tables */
  .table{ inline-size:100%; border-collapse:collapse }
  .table th,.table td{
    padding:12px; border-block-end:1px solid var(--line); text-align:start; vertical-align:middle;
  }
  .table th{
    color:#cfe0ff; font-size:13px; text-transform:uppercase; letter-spacing:.4px;
  }
  .table img{
    inline-size:56px; block-size:56px; object-fit:cover; border-radius:10px; border:1px solid var(--line);
  }

  /* Notices */
  .notice{
    background:linear-gradient(135deg, rgba(102,166,255,.10), rgba(255,58,136,.10));
    border:1px solid var(--line); padding:12px; border-radius:12px;
  }

  /* Footer */
  .footer{
    border-block-start:1px solid var(--line);
    background:linear-gradient(180deg,var(--bg),var(--bg));
    text-align:center; color:var(--muted); padding:18px;
  }

  /* Tooltips */
  [data-tooltip]{ position:relative }
  [data-tooltip]::after{
    content:attr(data-tooltip); position:absolute; inset-block-end:calc(100% + 8px); inset-inline-start:50%;
    translate:-50% 0; white-space:nowrap; font-size:12px; color:#e9f1ff;
    background:rgba(11,15,23,.95); border:1px solid var(--line); border-radius:8px; padding:6px 8px;
    opacity:0; pointer-events:none; transition:opacity var(--dur-2);
    box-shadow:var(--shadow-sm);
  }
  [data-tooltip]:hover::after{ opacity:1 }

  /* Toasts */
  .toast{
    position:fixed; inset-inline:50%; inset-block-end:24px; translate:-50% 0;
    background:linear-gradient(180deg,#0f1524,#0b111c); border:1px solid var(--line);
    color:var(--text); padding:10px 14px; border-radius:12px; box-shadow:var(--shadow-sm); z-index:var(--z-modal);
  }

  /* Modal */
  .modal{
    position:fixed; inset:0; display:grid; place-items:center; z-index:var(--z-modal);
    background:rgba(0,0,0,.55); backdrop-filter:blur(3px); opacity:0; pointer-events:none; transition:opacity var(--dur-2);
  }
  .modal.show{ opacity:1; pointer-events:auto }
  .modal .panel{
    background:linear-gradient(180deg,#0c1017,#0a0e15); border:1px solid var(--line); border-radius:var(--r-xl);
    padding:20px; inline-size:min(560px, 92%); box-shadow:var(--shadow-md);
  }

  /* Skeleton shimmer */
  .skeleton{ position:relative; overflow:hidden; background:#111826; border-radius:10px }
  .skeleton::after{
    content:""; position:absolute; inset:0; translate:-100% 0;
    background:linear-gradient(90deg, transparent, rgba(255,255,255,.08), transparent);
    animation:sheen 1.4s infinite var(--e-out);
  }
  @keyframes sheen{ to{ translate:100% 0 } }

  /* Focus polish */
  :where(button,.btn,.input,.select,a,[role="tab"],[role="button"]):focus-visible{ outline:none; box-shadow:var(--glowA) }

  /* CTA pulse */
  @keyframes pulseCTA{
    0%{ box-shadow:0 0 0 0 rgba(102,166,255,0), 0 0 0 0 rgba(22,228,255,0) }
    70%{ box-shadow:0 0 0 6px rgba(102,166,255,.18), 0 0 0 12px rgba(22,228,255,.12) }
    100%{ box-shadow:0 0 0 0 rgba(102,166,255,0), 0 0 0 0 rgba(22,228,255,0) }
  }
  .btn.primary:hover{ animation:pulseCTA 1.8s ease infinite }

  /* Hoverless devices */
  @media (hover: none){
    .btn:hover{ transform:none; box-shadow:none }
    .card:hover{ transform:none; box-shadow:var(--shadow-lg) }
  }

  /* Container query fine-tuning */
  @container (max-width: 320px){
    .ptitle{ font-size:15px }
    .pmeta{ font-size:12px }
    .price{ letter-spacing:.15px }
  }

  /* Forced colors */
  @media (forced-colors: active){
    *{ forced-color-adjust:auto }
    .btn,.select,.input,.tab,.badge,.card,.table th,.table td{ border-color:CanvasText }
    .btn.primary{ color:Canvas; background:Highlight }
    .price{ filter:none; color:Highlight }
  }
}

/* ---------------------- Utilities ---------------------- */
@layer utilities {
  .hidden{ display:none !important }
  .center{ text-align:center }
  .max{ inline-size:100% }
  .nowrap{ white-space:nowrap }
  .clamp-2{ display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden }
  .sr-only{
    position:absolute; inline-size:1px; block-size:1px; padding:0; margin:-1px;
    overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
  }

  /* Auto grid utility (drop-in) */
  .auto-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(min(220px, 100%), 1fr));
    gap:18px;
  }

  /* Responsive tweaks */
  @media (max-width:520px){
    .container{ padding-inline:16px }
    .btn{ padding:9px 12px }
    .grid,.auto-grid{ gap:14px }
    .ptitle{ font-size:16px }
  }

  /* Enter animations (tiny, tasteful) */
  @keyframes fadeUp{ from{ opacity:0; transform:translateY(6px) } to{ opacity:1; transform:none } }
  .reveal{ animation:fadeUp var(--dur-3) var(--e-out) both }
}

/* ---------------------- Notes ----------------------
- Badges: <span class="badge hot">Limited</span> / <span class="badge ok">In stock</span>
- Price:  <strong class="price">$29.00</strong>
- Stars:  <div class="rating" data-stars="4"></div>
- Tooltip:<button data-tooltip="Add to cart">Buy</button>
- Skeleton: <div class="skeleton" style="inline-size:100%;block-size:140px"></div>
- Modal:
  <div class="modal" id="m"><div class="panel">...</div></div>
  toggle .show to open/close
---------------------------------------------------- */
